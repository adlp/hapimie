{% extends "base.html" %}

{% block title %}Commandes AMI dynamiques{% endblock %}

{% block content %}
  <h1>ðŸ“¡ Commandes AMI</h1>
  <table id="commands-table">
    <thead>
      <tr>
        <th>Commande</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    fetch("/api/help")
      .then(res => res.json())
      .then(data => {
        const commands = data.Commands;
        const tbody = document.querySelector("#commands-table tbody");
        Object.entries(commands).forEach(([name, description]) => {
          const row = document.createElement("tr");
          row.innerHTML = `<td><a href="/help/${name}"><strong>${name}</strong></a></td><td>${description}</td>`;
          tbody.appendChild(row);
        });
      })
      .catch(err => {
        document.body.innerHTML = "<p>Erreur de chargement des commandes.</p>";
        console.error(err);
      });
  </script>
{% endblock %}
