{% extends "base.html" %}

{% block title %}AMI 2 JSON dynamiques{% endblock %}

{% block content %}
  <h1>ðŸ“¦ JSON pour : <span id="command-name">{{ command_name }}</span></h1>
  <div id="json-container"><em>Chargement...</em></div>

  <script>
    const name = document.getElementById("command-name").textContent;
    fetch(`/api/${name}`)
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById("json-container");
        container.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
      })
      .catch(err => {
        document.getElementById("json-container").innerHTML = "<p>Erreur de chargement du JSON.</p>";
        console.error(err);
      });
  </script>
{% endblock %}
